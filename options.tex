%%%%%%%%%%%%%%%%%%%% General %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[protrusion=true, expansion]{microtype} 

\usepackage[hidelinks]{hyperref} % Must go after the patches


%%%%%%%%%%%%%%%%%%%% Fonts %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage[english]{babel}



\usepackage{Charter}
\addtokomafont{disposition}{\rmfamily}


\usepackage{textcomp}

\linespread{1.1}  


%%%%%%%%%%%%%%%%%%%% Random Packages  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{geometry}	
\usepackage{enumerate} %Erweiterung der enumerate-Umgebung
\usepackage{ifthen,calc}
\usepackage{mathrsfs,amssymb} %Zusatzzeichen
\usepackage{wrapfig}
\usepackage[retainorgcmds]{IEEEtrantools} %Besonders geeignet f√ºr einen mehrzeilige Formelsatz
\usepackage{theorem} %Theoremlayout
\usepackage{multicol}
\setlength\columnsep{20pt}
\usepackage{csquotes}





%%%%%%%%%%%%%%%%%%%% Page %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% twoside
\geometry{left=2.7cm, right=2.3cm, top=2.7cm, bottom=2.2cm}


%%%%%%%%%%%% PDF %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\hypersetup{
	hidelinks=true,
	%	linkcolor=black,
	%	filecolor=black,      
	%	urlcolor=black,
	%	citecolor=black,
	%	allcolors=black,
	%	allbordercolors=white,
	%pdfpagemode=FullScreen,
	%	pdftitle={\mytitle},
	%	pdfauthor={\myauthor},
	pdfkeywords={},
	%	pdfcreator={Some fancy PDF-Creator...},
	bookmarksnumbered=true
}



%%%%%%%%%%%% footnotes %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[flushmargin, hang]{footmisc} % flush footnote mark to left margin
\usepackage{regexpatch}
\makeatletter
% 1. remove all redefinitions about footnotes done by \maketitle
%    and add \titletrue
\regexpatchcmd{\maketitle}
{\c{def}\c{@makefnmark}.*\c{if@twocolumn}}
{\c{titletrue}\c{if@twocolumn}}
{}{}
% 2. define a conditional
\newif\iftitle
%% 3. redefine \@makefnmark to print nothing when \titletrue
%\xpretocmd{\@makefnmark}{\iftitle\else}{}{}
%\xapptocmd{\@makefnmark}{\fi}{}{}
% 4. ensure \@makefntext has \titlefalse
%    that's justified by the fact that \@makefnmark
%    in \@makefntext is set in a box
\xpretocmd{\@makefntext}{\titlefalse}{}{}

\makeatother

\renewcommand{\footnotemargin}{1em}
%\addtolength{\footnotesep}{5mm}
\skip\footins=2\bigskipamount     % Determine the space above the rule
\renewcommand*{\footnoterule}{%
	\kern-3pt%
	\hrule width 1in%
	\kern 2.6pt%
	\vspace{\smallskipamount}       % The additional space below the rule
}



%%%%%%%%%%%% captions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[textfont={small},labelfont={small, bf}]{caption}
\DeclareCaptionFont{black}{ \color{white} }
\DeclareCaptionFormat{listing}{
	\colorbox[cmyk]{0.43, 0.35, 0.35,0.01 }{
		\parbox{\textwidth}{\hspace{15pt}#1#2#3}
	}
}
\captionsetup{format=plain, singlelinecheck=true}
\captionsetup[lstlisting]{labelfont={small, bf}, textfont={small}}


%%%%%%%%%%%% Title %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{titling}
\setlength{\droptitle}{-5em}
\pretitle{\begin{center}\LARGE\normalfont\scshape}
	\posttitle{\par\end{center}}
\preauthor{\begin{center}}
	\postauthor{\par\end{center}}
\predate{\begin{center}}
	\postdate{\par\end{center}}


%%%%%%%%%%%% footer / header %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{fancyhdr}

% twoside with subsection
\fancyhf{}
\fancyhead[RE]{\small\nouppercase\leftmark}
\fancyhead[LO]{\small\rightmark}
\fancyhead[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0pt}


% Does not really work...
%\setotherlanguage{greek}
%\setotherlanguage{hebrew}
%\newfontfamily\greekfont[]{Linux Libertine O}
%\newfontfamily\hebrewfont[]{Linux Libertine O}

\newcommand{\bm}{\vectorbold*} % using physics package

\newcommand{\matlab}{\textsc{Matlab}\textsuperscript{\tiny{\textregistered}}}

